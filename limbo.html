<!DOCTYPE html>
<html lang = 'en'>
    <head>
        <title>manipchi</title>
        <link href="style.css" rel="stylesheet" type="text/css">
        <link rel="preconnect" href="https://fonts.googleapis.com">
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link href="https://fonts.googleapis.com/css2?family=Inconsolata:wght@500&display=swap" rel="stylesheet">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
        
        <script src="https://code.highcharts.com/highcharts.js"></script>
        <script src="https://code.highcharts.com/modules/stock.js"></script>
        <script src="https://cdn.plot.ly/plotly-2.27.0.min.js"></script>

    
    </head>

    <body>
        <nav class = 'navbar'>
            <div class = 'navlinks'>
                <!-- <a href = './trading.html'>trading</a>
                <a href = './data.html'> data </a> -->
                <a href = './limbo.html'>limbo</a>
                <a href = './maths.html'>maths</a>
                <a href = './anki.html'>anki</a>
                <a href = './quant.html'>quant</a>
                <a href = './resources.html'>resources</a>
            </div>
        </nav>
        <header>
            <h1>
                <div class = 'logos'>
                    <a href = 'https://www.linkedin.com/in/manipchi' target="_blank" class = 'logos' id = 'linkedin'>
                        <i class="fa fa-linkedin-square"></i>
                    </a> 
                    <a href = 'https://open.spotify.com/user/manipchi' target="_blank" class = 'logos' id = 'spotify'>
                        <i class="fa fa-spotify"></i>
                    </a> 
                    <a href = 'https://github.com/manipchi' target="_blank" class = 'logos' id = 'github'>
                        <i class="fa fa-github"></i>
                    </a> 
                </div>
                <a class = 'main-title' href = './index.html'>limbo</a>
            </h1>
        </header>

        <p class = 'message'>I made a website for a daily game of <a href = "https://en.wikipedia.org/wiki/Unique_bid_auction#Mathematical_analysis" target = "_blank">LUPI(Lowest Unique Positive Integer)</a></p>
        <p class = 'message'>You can play it <a href = 'https://www.limbo.today' target="_blank">here</a></p>
        <p class = 'message'>Below is an interactive chart showing the distribution of guesses over time for the busiest month.</p>
        <div id="guessChart" style="width:100%; height:600px;"></div>
        <!-- <p class = 'message'>You can <a href = 'https://www.paypal.com/paypalme/manipchi/10' target="_blank">pay me</a> if they are of use to you.</p> -->


        <script>
            // Load your data
            fetch('guess_data.json')
              .then(response => response.json())
              .then(data => {
                createGuessChart(data);
              })
              .catch(error => console.error('Error loading data:', error));
            
            function createGuessChart(chartData) {
              const dates = Object.keys(chartData).sort();
              
              // Create just ONE trace that we'll update
              const firstDate = dates[0];
              const firstData = chartData[firstDate];
              
              const trace = {
                x: firstData.positions,
                y: firstData.counts,
                type: 'bar',
                marker: {
                  color: firstData.colors,
                  line: {width: 0}
                },
                width: 0.8,
                hovertemplate: 'Value: %{x}<br>Count: %{y}<extra></extra>'
              };
            
              // Create slider steps that update the single trace
              const steps = [];
              dates.forEach((date, index) => {
                const dateData = chartData[date];
                const step = {
                  method: 'update',
                  args: [
                    {
                      x: [dateData.positions],
                      y: [dateData.counts],
                      'marker.color': [dateData.colors]
                    },
                    {
                      title: `Guess Distribution - ${date} (n=${dateData.total_count})${dateData.winning_guess ? ' | Winner: ' + dateData.winning_guess : ''}`,
                      'xaxis.range': [0, Math.min(101, Math.max(...dateData.positions) + 2)]
                    }
                  ],
                  label: date
                };
                steps.push(step);
              });
            
              const layout = {
                title: `Guess Distribution - ${firstDate} (n=${firstData.total_count})${firstData.winning_guess ? ' | Winner: ' + firstData.winning_guess : ''}`,
                xaxis: {
                  title: 'Guess Value', 
                  range: [0, Math.min(50, Math.max(...firstData.positions) + 2)]
                },
                yaxis: {title: 'Frequency'},
                height: 600,
                showlegend: false,
                hovermode: 'closest',
                sliders: [{
                  active: 0,
                  steps: steps,
                  y: -0.1,
                  x: 0.05,
                  len: 0.9,
                  currentvalue: {prefix: "", visible: true}
                }]
              };
            
              Plotly.newPlot('guessChart', [trace], layout);
            }
            </script>
    </body>
</html> 